@model IEnumerable<Blog.Models.ImageView>

@{
    ViewBag.Title = "UploadImage";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>UploadImage</h2>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>



<div class="container">

    <div class="row">

        <div class="col-lg-12">
            <h1 class="page-header">@Session["LoggedUserName"].ToString()'s Gallery</h1>
        </div>


        @foreach (var image in Model)
        {
            <div class="col-lg-3 col-md-4 col-xs-6 thumb">
                <a href="@Url.Action("ImageDetail", "Home", new Blog.Models.ImageView { Url = image.Url })" class="returnImage" data-url="@Request.Url.GetLeftPart(UriPartial.Authority)@image.Url">
                    <img src="@image.Url" alt="Hejsan" id="#image" data-source="@image.Url" class="img-responsive" width="200" height="200"/>
                </a>
                <br>
                <p>Post at @image.UpdateDate</p>
            </div>
        }
    </div>
</div>

<hr>
<script type="text/javascript">
    $(document).ready(function () {
        $(".returnImage").click("click", function (e) {
            var urlImage = $(this).attr("data-url");
            window.opener.$("div[name='info']>table>tbody>tr:nth-of-type(1)>td.cke_dialog_ui_vbox_child>div>table>tbody>tr>td>table>tbody>tr>td>div>div>div>input.cke_dialog_ui_input_text").val(urlImage);
            window.close();
        });
    });
</script>
